{% extends 'layout.html' %}
{% load static %}
{% load i18n %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">

<section id="ibr-profile" class="page-wrapper">
  <span class="logo-wrapper">
    {% if request.user.profile_pic %}
      <img class="profile-pic" src="{{ request.user.profile_pic.url }}">
    {% else %}
      <img class="profile-pic" src="{% static 'img/icon.png' %}">
    {% endif %}
  </span>
  {% trans "Vendor" as v %}
  <h2> {{request.user.first_name}} {{request.user.last_name}}</h2>
  <div class="table-wrapper table-responsive">
    <table class="table table-striped">
      <tr>
        <th>{% trans "Full Name" %}</th>
        <td colspan="2"> {{request.user.first_name}} {{request.user.last_name}}</td>
      </tr>
      <tr>
        <th>{% trans "Username" %}</th>
        <td colspan="2"> {{request.user.username}}</td>
      </tr>
      <tr>
        <th>{% trans "Email" %}</th>
        <td colspan="2"> {{request.user.email}}</td>
      </tr>
      <tr>
        <th>{% trans "Phone" %}</th>
        <td colspan="2"> {{request.user.phone}}</td>
      </tr>
      <tr>
        <th>{% trans "Person Type" %}</th>
        <td colspan="2"> {{request.user.person_type }}</td>
      </tr>
      {% if request.user.person_type == v %}
      <tr>
        <th>{% trans "Type of Supply" %}</th>
	<td colspan="2"> {{request.user.type_of_supply }}</td>
      </tr>
      <tr>
        <th>{% trans "The trade name of the company" %}</th>
	<td colspan="2"><h5> {{request.user.VEND_DESC_ARABIC }}</h5></td>
      </tr>
      {% endif %}
      
      {% if request.user.person_type == v %}
      <tr>
        <td  colspan="3"><h3 class="card-header text-center text-uppercase py-2">{% trans "Required Papers" %}</h3></td>
      </tr>
      {% if request.user.sign_auth %}
      <tr>
        <th>{% trans "Sign Auth" %}</th>
        <td class="two-elms">
 	  <img class="files file-pic" src="{{ request.user.sign_auth.url }}">
        </td>
        <td>
	  <a class="btn btn-sm btn-primary" id="show_signauth" url="{{request.user.sign_auth.url}}" data-toggle="modal" data-target="#img-modal" >{% trans "show" %}</a>
	</td>
      </tr>
      {% endif %}

      {% if request.user.trade_book %}
      <tr>
        <th> {% trans "Trade Book" %}</th>
        <td class="two-elms">
          <img class="files file-pic" src="{{ request.user.trade_book.url }}">
        </td>
        <td>
	  <a class="btn btn-sm btn-primary" id="show_tradebook" url="{{ request.user.trade_book.url }}" data-toggle="modal" data-target="#img-modal">{% trans "show" %}</a>
	</td>
        </td>
      </tr>
      {% endif %}
      {% if request.user.chamber_book %}
      <tr>
        <th>{% trans "Chamber Book" %}</th>
        <td class="two-elms">
          <img class="files file-pic" src="{{ request.user.chamber_book.url }}">
        </td>
        <td>
	  <a class="btn btn-sm btn-primary" id="show_chamberbook" url="{{ request.user.chamber_book.url }}" data-toggle="modal" data-target="#img-modal">{% trans "show" %}</a>
	</td>
      </tr>
      {% endif %}
      {% if request.user.trademark %}
      <tr>
        <th>{% trans "Trade Mark" %}</th>
        <td class="two-elms">
          <img class="files file-pic" src="{{ request.user.trademark.url }}">
        </td>
        <td>
	  <a class="btn btn-sm btn-primary" id="show_trademark" url="{{ request.user.trademark.url }}" data-toggle="modal" data-target="#img-modal">{% trans "show" %}</a>
	</td>
      </tr>
      {% endif %}
      {% if request.user.import_license %}
      <tr>
        <th>{% trans "Import License" %}</th>
        <td class="two-elms">
          <img class="files file-pic" src="{{ request.user.import_license.url }}">
        </td>
        <td>
	  <a class="btn btn-sm btn-primary" id="show_importlicense" url="{{ request.user.import_license.url }}" data-toggle="modal" data-target="#img-modal">{% trans "show" %}</a>
	</td>
      </tr>
      {% endif %}
      {% if request.user.healthy_preview %}
      <tr>
        <th>{% trans "Healthy Preview" %}</th>
        <td class="two-elms">
          <img class="files file-pic" src="{{ request.user.healthy_preview.url }}">
        </td>
	<td>
	  <a class="btn btn-sm btn-primary" id="show_healthy" url="{{ request.user.healthy_preview.url }}" data-toggle="modal" data-target="#img-modal">{% trans "show" %}</a>
	</td>
      </tr>
      {% endif %}
      {% if request.user.agency_book %}
      <tr>
        <th>{% trans "Agency Book" %}</th>
        <td class="two-elms">
          <img class="files file-pic" src="{{ request.user.agency_book.url }}">
        </td>
        <td><a class="btn btn-sm btn-primary" id="show_agency" url="{{ request.user.agency_book.url }}" data-toggle="modal" data-target="#img-modal">{% trans "show" %}</a></td>
      </tr>
      {% endif %}
      {% if request.user.varieties_revealed %}
      <tr>
        <th>{% trans "Varieties Revealed" %}</th>
        <td class="two-elms">
          <img class="files file-pic" src="{{ request.user.varieties_revealed.url }}">
        </td>
        <td><a class="btn btn-sm btn-primary" id=show_varieties" url="{{ request.user.varieties_revealed.url }}" data-toggle="modal" data-target="#img-modal">{% trans "show" %}</a></td>
      </tr>
      {% endif %}
      {% if request.user.federation_of_associations %}
      <tr>
        <th>{% trans "Federation of Associations" %}</th>
        <td class="two-elms">
          <img class="files file-pic"
              src="{{ request.user.federation_of_associations.url }}">
        </td>
	<td><a class="btn btn-sm btn-primary" id="show_federation" url="{{ request.user.federation_of_associations.url }}" data-toggle="modal" data-target="#img-modal">{% trans "show" %}</a></td>
      </tr>
      {% endif %}
      {% if request.user.customs_declaration %}
      <tr>
        <th>{% trans "Customs Declaration" %}</th>
        <td class="two-elms">
          <img class="files file-pic" src="{{ request.user.customs_declaration.url }}">
        </td>
        <td><a class="btn btn-sm btn-primary" onclick='show_img(`{{ request.user.customs_declaration.url }}`)' data-toggle="modal" data-target="#img-modal">{% trans "show" %}</a></td>
      </tr>
      {% endif %}
      {% if request.user.industrial_facility %}
      <tr>
        <th>{% trans "Industrial Facility" %}</th>
        <td class="two-elms">
          <img class="files file-pic" src="{{ request.user.industrial_facility.url }}">
        </td>
        <td><a class="btn btn-sm btn-primary" onclick='show_img(`{{ request.user.industrial_facility.url }}`)' data-toggle="modal" data-target="#img-modal">{% trans "show" %}</a></td>
      </tr>
      {% endif %}
      {% endif %}
    </table>
  </div>
  <div class="action-btns d-flex align-items-center flex-wrap">
    <a class="btn btn-primary btn-md " href="{% url 'update_profile' %}" role="button">{% trans "Edit" %}</a>
    <a class="btn btn-primary btn-md " href="{% url 'change_password' %}"
      role="button">{% trans "Change Password" %}</a>
  </div>
</section>

<!-- Modal -->
<div class="modal fade" id="img-modal" tabindex="-1" role="dialog" aria-labelledby="img-modal" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">        
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="img_div">
        <!-- Put the <img> here -->
      </div>      
    </div>
  </div>
</div>
<script src="{% static 'js/print.js' %}"></script>

<script src="https://github.com/pipwerks/PDFObject/blob/master/pdfobject.min.js"></script> 
<script>
function show_img(source) {
  type = source.split('.')[1];
  if (source.endsWith('.docx') || source.endsWith('.doc')){
    $("#img_div").html(`<iframe src="https://docs.google.com/gview?url=https://bayancoopq8.com`+source+`&embedded=true" frameborder="0" width="100%" height="600px"></iframe>`);
  }
  else if(source.endsWith('.pdf')){
    $("#img_div").html(`<embed src=https://bayancoopq8.com`+source+` frameborder="0" width="100%" height="600px">`);
  }
  else if(source.endsWith('.png') || source.endsWith('.jpg')){
    $("#img_div").html("<img class='files file-pic' src="+source+" width='100%' >");
  }
  else if(source.endsWith('.xlsx')){
    $("#img_div").html(`<iframe src='https://view.officeapps.live.com/op/embed.aspx?src=https://bayancoopq8.com`+source+`' width='100%' height='565px' frameborder='0'> </iframe>`);
  }
};
</script>		
{% endblock %}
